{% extends "global/Page.html" %}
{% load otree static %}
{% block scripts %}
    <!-- custom style sheet-->
    <!-- <link href="{% static 'css/schools.css' %}" rel="stylesheet"> -->
    <script src="{% static 'js/schools.js' %}"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            formulario = document.getElementById("form");
        });

        document.getElementById("puntaje_20000").addEventListener("change", function() {
            let v = parseInt(this.value);
            if (v < 0) this.value = 0;
            if (v > 100) this.value = 100;
        });

        document.getElementById("puntaje_15000").addEventListener("change", function() {
            let v = parseInt(this.value);
            if (v < 0) this.value = 0;
            if (v > 100) this.value = 100;
        });

        document.getElementById("puntaje_10000").addEventListener("change", function() {
            let v = parseInt(this.value);
            if (v < 0) this.value = 0;
            if (v > 100) this.value = 100;
        });

        document.getElementById("puntaje_5000").addEventListener("change", function() {
            let v = parseInt(this.value);
            if (v < 0) this.value = 0;
            if (v > 100) this.value = 100;
        });

        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
            ev.dataTransfer.setData("parent", ev.target.parentElement.id);
        }

        function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            var padre = ev.dataTransfer.getData("parent");
            var class_drag = document.getElementById(data).className;
            var class_drop = ev.target.className;
            if(class_drop == 'receiver_default_prueba'){
                if(class_drag == 'option_prueba') {
                    ev.target.appendChild(document.getElementById(data));
                    document.getElementById(padre).style.borderColor = "#ff000077";
                    document.getElementById(padre).firstElementChild.removeAttribute("value");
                }
            } else if(class_drop == 'receiver_default_puntua') { 
                if(class_drag == 'option_puntua') {
                    ev.target.appendChild(document.getElementById(data));
                    document.getElementById(padre).style.borderColor = "#ff000077";
                    document.getElementById(padre).firstElementChild.removeAttribute("value");
                }
            } else {
                if(ev.target.childElementCount == 1){ // Para que sea solamente 1 por 
                    if(class_drag == 'option_prueba') { 
                        if(class_drop == 'receiver_prueba'){
                            ev.target.firstElementChild.value = document.getElementById(data).textContent;
                            ev.target.appendChild(document.getElementById(data));
                            ev.target.style.borderColor = "#ffffffff";
                            if(document.getElementById(padre).className == 'receiver_prueba') {
                                document.getElementById(padre).style.borderColor = "#ff000077";
                                document.getElementById(padre).firstElementChild.removeAttribute("value");
                            }
                        }
                    } else if(class_drag == 'option_puntua'){
                        if(class_drop == 'receiver_puntua'){
                            ev.target.firstElementChild.value = document.getElementById(data).textContent;
                            ev.target.appendChild(document.getElementById(data));
                            ev.target.style.borderColor = "#ffffffff";
                            if(document.getElementById(padre).className == 'receiver_puntua') {
                                document.getElementById(padre).style.borderColor = "#ff000077";
                                document.getElementById(padre).firstElementChild.removeAttribute("value");
                            }
                        }
                    }
                }
            }
        }

        function enviar(){
            formulario.submit();
        }
    </script>
    <style>
    .otree-btn-next {
        display: none;
    }

    .div_tables .options_tables{
        width: 100%;
    }

    .tabla {
        margin: 20px;
        margin-bottom: 20px;
        width: 100%;
    }

    .tabla td {
        padding: 10px 12px;
        text-align: center;
        border-color: #000000;
        border-style: solid;
        border-width: 1px;
    }

    .option_prueba {
        padding: 5px 10px;
        border-color: #000000;
        border-style: solid;
        border-width: 1px;
        border-radius: 10px;
        margin-right: 5px;
        margin-left: 5px;
        height: 35px;
    }

    .option_puntua {
        padding: 5px 10px;
        border-color: #000000;
        border-style: solid;
        border-width: 1px;
        border-radius: 10px;
        margin-right: 5px;
        margin-left: 5px;
        height: 35px;
    }

    .option_prueba:hover {
        background-color: #e7e7e7;
    }

    .option_puntua:hover {
        background-color: #e7e7e7;
    }

    .receiver_prueba {
        width: 100%;
        border-color: #ff000077;
        border-style: solid;
        border-width: 1px;
        border-radius: 10px;
        height: 33px;
        padding-top: 4px;
    }

    .receiver_puntua {
        width: 100%;
        border-color: #ff000077;
        border-style: solid;
        border-width: 1px;
        border-radius: 10px;
        height: 40px;
        padding-top: 7px;
    }

    .receiver_default_prueba {
        width: 100%;
        height: 40px;
        display: inline-flex;
    }

    .receiver_default_puntua {
        width: 100%;
        height: 40px;
        display: inline-flex;
    }

    .btn_next {
        cursor: pointer;
        display: block !important;
        color: #ffffff;
        background-color: #007bff;
        border-color: #007bff;
        font-weight: 400;
        text-align: center;
        white-space: nowrap;
        vertical-align: middle;
        user-select: none;
        border: 1px solid transparent;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        line-height: 1.5;
        border-radius: 0.25rem;
        transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        position: absolute;
        width: 8vw;
        left: 46vw;
    }

    .btn_next:hover {
        background-color: #0069d9;
        border-color: #0069d9;
    }

    .input_number {
        text-align: center;
        height: 33px;
        width: 80px;
    }
    </style>
{% endblock %}

{% block content %}
<div class="options_tables">
    <table>
        <tr>
            <td style="height: 48px;"><b>Prueba: </b></td>
            <td style="width: 100%;">
                <div ondrop="drop(event)" ondragover="allowDrop(event)" class="receiver_default_prueba">
                    <span draggable="true" ondragstart="drag(event)" id="opt_prueba_01" class="option_prueba">Matemáticas</span>
                    <span draggable="true" ondragstart="drag(event)" id="opt_prueba_02" class="option_prueba">Lectura Crítica</span>
                    <span draggable="true" ondragstart="drag(event)" id="opt_prueba_03" class="option_prueba">Sociales y Ciudadanas</span>
                    <span draggable="true" ondragstart="drag(event)" id="opt_prueba_04" class="option_prueba">Ciencias Naturales</span>
                </div>
            </td>
        </tr>
        <tr>
            <td style="padding-right: 10px; height: 48px;"><b>Calificación de Preferencia: </b></td>
            <td style="width: 100%">
                <div ondrop="drop(event)" ondragover="allowDrop(event)" class="receiver_default_puntua">
                    <span draggable="true" ondragstart="drag(event)" id="opt_prefer_01" class="option_puntua">1</span>
                    <span draggable="true" ondragstart="drag(event)" id="opt_prefer_02" class="option_puntua">2</span>
                    <span draggable="true" ondragstart="drag(event)" id="opt_prefer_03" class="option_puntua">3</span>
                    <span draggable="true" ondragstart="drag(event)" id="opt_prefer_04" class="option_puntua">4</span>
                </div>
            </td>
        </tr>
    </table>

</div>

<div class="div_tables">

<table class="tabla">
    <tr>
        <td class="head" style="width: 25%;">
            <b>Ganancia si acierta en el puntaje</b>
        </td>
        <td class="head" style="width: 35%;">
            <b>Prueba</b>
        </td>
        <td class="head" style="width: 20%;">
            <b>Puntaje Prueba</b><br>(Número de <b>0</b> a <b>100</b>)
        </td>
        <td class="head" style="width: 20%;">
            <b>Califique su preferencia</b><br>(<b>1</b> la menos preferida y <b>4</b> la más preferida)
        </td>
    </tr>
    <tr>
        <td>
            $ 20.000
        </td>
        <td>
            <div name="prueba_20000" ondrop="drop(event)" ondragover="allowDrop(event)" id="rec_prueba_01" class="receiver_prueba"><input type="hidden" name="prueba_20000"></div>
        </td>
        <td>
            <input type="number" min="0" max="100" title="Coloque un número entre 0 y 100" class="input_number" name="puntaje_20000" id="puntaje_20000">
        </td>
        <td>
            <div name="prefer_20000" ondrop="drop(event)" ondragover="allowDrop(event)" id="rec_prefer_01" class="receiver_puntua"><input type="hidden" name="prefer_20000"></div>
        </td>
    </tr>
    <tr>
        <td>
            $ 15.000
        </td>
        <td>
            <div name="prueba_15000" ondrop="drop(event)" ondragover="allowDrop(event)" id="rec_prueba_02" class="receiver_prueba"><input type="hidden" name="prueba_15000"></div>
        </td>
        <td>
            <input type="number" min="0" max="100" title="Coloque un número entre 0 y 100" class="input_number" name="puntaje_15000" id="puntaje_15000">
        </td>
        <td>
            <div name="prefer_15000" ondrop="drop(event)" ondragover="allowDrop(event)" id="rec_prefer_02" class="receiver_puntua"><input type="hidden" name="prefer_15000"></div>
        </td>
    </tr>
    <tr>
        <td>
            $10.000
        </td>
        <td>
            <div name="prueba_10000" ondrop="drop(event)" ondragover="allowDrop(event)" id="rec_prueba_03" class="receiver_prueba"><input type="hidden" name="prueba_10000"></div>
        </td>
        <td>
            <input type="number" min="0" max="100" title="Coloque un número entre 0 y 100" class="input_number" name="puntaje_10000" id="puntaje_10000">
        </td>
        <td>
            <div name="prefer_10000" ondrop="drop(event)" ondragover="allowDrop(event)" id="rec_prefer_03" class="receiver_puntua"><input type="hidden" name="prefer_10000"></div>
        </td>
    </tr>
    <tr>
        <td>
            $ 5.000
        </td>
        <td>
            <div name="prueba_5000" ondrop="drop(event)" ondragover="allowDrop(event)" id="rec_prueba_04" class="receiver_prueba"><input type="hidden" name="prueba_5000"></div>
        </td>
        <td>
            <input type="number" min="0" max="100" title="Coloque un número entre 0 y 100" class="input_number" name="puntaje_5000" id="puntaje_5000">
        </td>
        <td>
            <div name="prefer_5000" ondrop="drop(event)" ondragover="allowDrop(event)" id="rec_prefer_04" class="receiver_puntua"><input type="hidden" name="prefer_5000"></div>
        </td>
    </tr>
</table>

<hr>

<table class="tabla">
    <tr>
        <td class="head" style="width: 18%;">
            <b>Puntaje Global</b>
        </td>
        <td class="head" style="width: 8%;">
            <b>1-10</b>
        </td>
        <td class="head" style="width: 8%;">
            <b>11-20</b>
        </td>
        <td class="head" style="width: 8%;">
            <b>21-30</b>
        </td>
        <td class="head" style="width: 8%;">
            <b>31-40</b>
        </td>
        <td class="head" style="width: 8%;">
            <b>41-50</b>
        </td>
        <td class="head" style="width: 8%;">
            <b>51-60</b>
        </td>
        <td class="head" style="width: 8%;">
            <b>61-70</b>
        </td>
        <td class="head" style="width: 8%;">
            <b>71-80</b>
        </td>
        <td class="head" style="width: 8%;">
            <b>81-90</b>
        </td>
        <td class="head">
            <b>91-100</b>
        </td>
    </tr>
    <tr>
        <td>
            Seleccione solo <b>UN</b> círculo
        </td>
        <td>
            <input type="radio" name="puntaje_global" value="1">
        </td>
        <td>
            <input type="radio" name="puntaje_global" value="11">
        </td>
        <td>
            <input type="radio" name="puntaje_global" value="21">
        </td>
        <td>
            <input type="radio" name="puntaje_global" value="31">
        </td>
        <td>
            <input type="radio" name="puntaje_global" value="41">
        </td>
        <td>
            <input type="radio" name="puntaje_global" value="51">
        </td>
        <td>
            <input type="radio" name="puntaje_global" value="61">
        </td>
        <td>
            <input type="radio" name="puntaje_global" value="71">
        </td>
        <td>
            <input type="radio" name="puntaje_global" value="81">
        </td>
        <td>
            <input type="radio" name="puntaje_global" value="91">
        </td>
    </tr>
    
</table>

</div>




    {% next_button %}

<input type="button" value="Siguiente" class="btn_next" onclick="enviar()">


{% endblock %}

